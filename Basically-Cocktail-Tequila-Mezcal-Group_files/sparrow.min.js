!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Sparrow=e()}}(function(){var define,module,exports;return function i(a,c,s){function u(t,e){if(!c[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=c[t]={exports:{}};a[t][0].call(o.exports,function(e){return u(a[t][1][e]||e)},o,o.exports,i,a,c,s)}return c[t].exports}for(var l="function"==typeof require&&require,e=0;e<s.length;e++)u(s[e]);return u}({1:[function(B,n,r){(function(F,V){var e,t;e=this,t=function(){"use strict";function u(e){return"function"==typeof e}var n=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=0,t=void 0,o=void 0,c=function(e,t){f[r]=e,f[r+1]=t,2===(r+=2)&&(o?o(p):w())};var e="undefined"!=typeof window?window:void 0,i=e||{},a=i.MutationObserver||i.WebKitMutationObserver,s="undefined"==typeof self&&void 0!==F&&"[object process]"==={}.toString.call(F),l="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function d(){var e=setTimeout;return function(){return e(p,1)}}var f=new Array(1e3);function p(){for(var e=0;e<r;e+=2){(0,f[e])(f[e+1]),f[e]=void 0,f[e+1]=void 0}r=0}var h,v,m,y,w=void 0;function g(e,t){var n=arguments,r=this,o=new this.constructor(_);void 0===o[x]&&N(o);var i,a=r._state;return a?(i=n[a-1],c(function(){return q(a,o,i,r._result)})):D(r,o,e,t),o}function b(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(_);return A(t,e),t}w=s?function(){return F.nextTick(p)}:a?(v=0,m=new a(p),y=document.createTextNode(""),m.observe(y,{characterData:!0}),function(){y.data=v=++v%2}):l?((h=new MessageChannel).port1.onmessage=p,function(){return h.port2.postMessage(0)}):void 0===e&&"function"==typeof B?function(){try{var e=B("vertx");return void 0!==(t=e.runOnLoop||e.runOnContext)?function(){t(p)}:d()}catch(e){return d()}}():d();var x=Math.random().toString(36).substring(16);function _(){}var k=void 0,S=1,j=2,E=new P;function C(e){try{return e.then}catch(e){return E.error=e,E}}function T(e,t,n){var r,o,i,a;t.constructor===e.constructor&&n===g&&t.constructor.resolve===b?(i=e,(a=t)._state===S?I(i,a._result):a._state===j?M(i,a._result):D(a,void 0,function(e){return A(i,e)},function(e){return M(i,e)})):n===E?(M(e,E.error),E.error=null):void 0===n?I(e,t):u(n)?(r=t,o=n,c(function(t){var n=!1,e=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(o,r,function(e){n||(n=!0,r!==e?A(t,e):I(t,e))},function(e){n||(n=!0,M(t,e))},t._label);!n&&e&&(n=!0,M(t,e))},e)):I(e,t)}function A(e,t){var n,r;e===t?M(e,new TypeError("You cannot resolve a promise with itself")):(r=typeof(n=t),null===n||"object"!==r&&"function"!==r?I(e,t):T(e,t,C(t)))}function O(e){e._onerror&&e._onerror(e._result),H(e)}function I(e,t){e._state===k&&(e._result=t,e._state=S,0!==e._subscribers.length&&c(H,e))}function M(e,t){e._state===k&&(e._state=j,e._result=t,c(O,e))}function D(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+S]=n,o[i+j]=r,0===i&&e._state&&c(H,e)}function H(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,o=void 0,i=e._result,a=0;a<t.length;a+=3)r=t[a],o=t[a+n],r?q(n,r,o,i):o(i);e._subscribers.length=0}}function P(){this.error=null}var L=new P;function q(e,t,n,r){var o=u(n),i=void 0,a=void 0,c=void 0,s=void 0;if(o){if((i=function(e,t){try{return e(t)}catch(e){return L.error=e,L}}(n,r))===L?(s=!0,a=i.error,i.error=null):c=!0,t===i)return void M(t,new TypeError("A promises callback cannot return that same promise."))}else i=r,c=!0;t._state!==k||(o&&c?A(t,i):s?M(t,a):e===S?I(t,i):e===j&&M(t,i))}var R=0;function N(e){e[x]=R++,e._state=void 0,e._result=void 0,e._subscribers=[]}function U(e,t){this._instanceConstructor=e,this.promise=new e(_),this.promise[x]||N(this.promise),n(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?I(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&I(this.promise,this._result))):M(this.promise,new Error("Array Methods must be provided an Array"))}function W(e){this[x]=R++,this._result=this._state=void 0,this._subscribers=[],_!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof W?function(t,e){try{e(function(e){A(t,e)},function(e){M(t,e)})}catch(e){M(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return U.prototype._enumerate=function(e){for(var t=0;this._state===k&&t<e.length;t++)this._eachEntry(e[t],t)},U.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===b){var o=C(t);if(o===g&&t._state!==k)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===W){var i=new n(_);T(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},U.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===k&&(this._remaining--,e===j?M(r,n):this._result[t]=n),0===this._remaining&&I(r,this._result)},U.prototype._willSettleAt=function(e,t){var n=this;D(e,void 0,function(e){return n._settledAt(S,t,e)},function(e){return n._settledAt(j,t,e)})},W.all=function(e){return new U(this,e).promise},W.race=function(o){var i=this;return n(o)?new i(function(e,t){for(var n=o.length,r=0;r<n;r++)i.resolve(o[r]).then(e,t)}):new i(function(e,t){return t(new TypeError("You must pass an array to race."))})},W.resolve=b,W.reject=function(e){var t=new this(_);return M(t,e),t},W._setScheduler=function(e){o=e},W._setAsap=function(e){c=e},W._asap=c,W.prototype={constructor:W,then:g,catch:function(e){return this.then(null,e)}},W.polyfill=function(){var e=void 0;if(void 0!==V)e=V;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=W},W.Promise=W},"object"==typeof r&&void 0!==n?n.exports=t():"function"==typeof define&&define.amd?define(t):e.ES6Promise=t()}).call(this,B("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:4}],2:[function(e,t,n){var r,o;r=this,o=function(){return function(n){function r(e){if(o[e])return o[e].exports;var t=o[e]={exports:{},id:e,loaded:!1};return n[e].call(t.exports,t,t.exports,r),t.loaded=!0,t.exports}var o={};return r.m=n,r.c=o,r.p="",r(0)}([function(e,t,n){"use strict";var r,o=n(2),i=(r=o)&&r.__esModule?r:{default:r};e.exports=i.default},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(9)),i=r(n(3)),a=n(4);t.default=function(){if("undefined"!=typeof window){var n={history:[]},r={offset:{},threshold:0,test:a.inViewport},t=(0,o.default)(function(){n.history.forEach(function(e){n[e].check()})},100);["scroll","resize","load"].forEach(function(e){return addEventListener(e,t)}),window.MutationObserver&&addEventListener("DOMContentLoaded",function(){new MutationObserver(t).observe(document.body,{attributes:!0,childList:!0,subtree:!0})});var e=function(e){if("string"==typeof e){var t=[].slice.call(document.querySelectorAll(e));return-1<n.history.indexOf(e)?n[e].elements=t:(n[e]=(0,i.default)(t,r),n.history.push(e)),n[e]}};return e.offset=function(t){if(void 0===t)return r.offset;var n=function(e){return"number"==typeof e};return["top","right","bottom","left"].forEach(n(t)?function(e){return r.offset[e]=t}:function(e){return n(t[e])?r.offset[e]=t[e]:null}),r.offset},e.threshold=function(e){return"number"==typeof e&&0<=e&&e<=1?r.threshold=e:r.threshold},e.test=function(e){return"function"==typeof e?r.test=e:r.test},e.is=function(e){return r.test(e,r)},e.offset(0),e}}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),n=function(){function n(e,t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),this.options=t,this.elements=e,this.current=[],this.handlers={enter:[],exit:[]},this.singles={enter:[],exit:[]}}return r(n,[{key:"check",value:function(){var i=this;return this.elements.forEach(function(e){var t=i.options.test(e,i.options),n=i.current.indexOf(e),r=-1<n,o=!t&&r;t&&!r&&(i.current.push(e),i.emit("enter",e)),o&&(i.current.splice(n,1),i.emit("exit",e))}),this}},{key:"on",value:function(e,t){return this.handlers[e].push(t),this}},{key:"once",value:function(e,t){return this.singles[e].unshift(t),this}},{key:"emit",value:function(e,t){for(;this.singles[e].length;)this.singles[e].pop()(t);for(var n=this.handlers[e].length;-1<--n;)this.handlers[e][n](t);return this}}]),n}();t.default=function(e,t){return new n(e,t)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inViewport=function(e,t){var n=e.getBoundingClientRect(),r=n.top,o=n.right,i=n.bottom,a=n.left,c=n.width,s=n.height,u=i,l=window.innerWidth-a,d=window.innerHeight-r,f=o,p=t.threshold*c,h=t.threshold*s;return u>t.offset.top+h&&l>t.offset.right+p&&d>t.offset.bottom+h&&f>t.offset.left+p}},function(n,e){(function(e){var t="object"==typeof e&&e&&e.Object===Object&&e;n.exports=t}).call(e,function(){return this}())},function(e,t,n){var r=n(5),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},function(e,t,n){var w=n(1),g=n(8),b=n(10),x=Math.max,_=Math.min;e.exports=function(r,o,e){function i(e){var t=u,n=l;return u=l=void 0,v=e,f=r.apply(n,t)}function a(e){var t=e-h;return void 0===h||o<=t||t<0||y&&d<=e-v}function c(){var e,t,n=g();return a(n)?s(n):void(p=setTimeout(c,(t=o-((e=n)-h),y?_(t,d-(e-v)):t)))}function s(e){return p=void 0,n&&u?i(e):(u=l=void 0,f)}function t(){var e,t=g(),n=a(t);if(u=arguments,l=this,h=t,n){if(void 0===p)return v=e=h,p=setTimeout(c,o),m?i(e):f;if(y)return p=setTimeout(c,o),i(h)}return void 0===p&&(p=setTimeout(c,o)),f}var u,l,d,f,p,h,v=0,m=!1,y=!1,n=!0;if("function"!=typeof r)throw new TypeError("Expected a function");return o=b(o)||0,w(e)&&(m=!!e.leading,d=(y="maxWait"in e)?x(b(e.maxWait)||0,o):d,n="trailing"in e?!!e.trailing:n),t.cancel=function(){void 0!==p&&clearTimeout(p),u=h=l=p=void(v=0)},t.flush=function(){return void 0===p?f:s(g())},t}},function(e,t,n){var r=n(6);e.exports=function(){return r.Date.now()}},function(e,t,n){var i=n(7),a=n(1);e.exports=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return a(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),i(e,t,{leading:r,maxWait:t,trailing:o})}},function(e,t){e.exports=function(e){return e}}])},"object"==typeof n&&"object"==typeof t?t.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof n?n.inView=o():r.inView=o()},{}],3:[function(e,o,i){!function(e){var t=!1;if("function"==typeof define&&define.amd&&(define(e),t=!0),"object"==typeof i&&(o.exports=e(),t=!0),!t){var n=window.Cookies,r=window.Cookies=e();r.noConflict=function(){return window.Cookies=n,r}}}(function(){function p(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}return function e(d){function f(e,t,n){var r;if("undefined"!=typeof document){if(1<arguments.length){if("number"==typeof(n=p({path:"/"},f.defaults,n)).expires){var o=new Date;o.setMilliseconds(o.getMilliseconds()+864e5*n.expires),n.expires=o}try{r=JSON.stringify(t),/^[\{\[]/.test(r)&&(t=r)}catch(e){}return t=d.write?d.write(t,e):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=(e=(e=encodeURIComponent(String(e))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape),document.cookie=[e,"=",t,n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}e||(r={});for(var i=document.cookie?document.cookie.split("; "):[],a=/(%[0-9A-Z]{2})+/g,c=0;c<i.length;c++){var s=i[c].split("="),u=s.slice(1).join("=");'"'===u.charAt(0)&&(u=u.slice(1,-1));try{var l=s[0].replace(a,decodeURIComponent);if(u=d.read?d.read(u,l):d(u,l)||u.replace(a,decodeURIComponent),this.json)try{u=JSON.parse(u)}catch(e){}if(e===l){r=u;break}e||(r[l]=u)}catch(e){}}return r}}return(f.set=f).get=function(e){return f.call(f,e)},f.getJSON=function(){return f.apply({json:!0},[].slice.call(arguments))},f.defaults={},f.remove=function(e,t){f(e,"",p(t,{expires:-1}))},f.withConverter=e,f}(function(){})})},{}],4:[function(e,t,n){var r,o,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{o="function"==typeof clearTimeout?clearTimeout:c}catch(e){o=c}}();var u,l=[],d=!1,f=-1;function p(){d&&u&&(d=!1,u.length?l=u.concat(l):f=-1,l.length&&h())}function h(){if(!d){var e=s(p);d=!0;for(var t=l.length;t;){for(u=l,l=[];++f<t;)u&&u[f].run();f=-1,t=l.length}u=null,d=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===c||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(e)}}function v(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new v(e,t)),1!==l.length||d||s(h)},v.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],5:[function(e,t,n){"use strict";t.exports={origin:"cn-general",method:"GET",reloadDelay:2e4,capturedQueryParams:["mbid"],capturedCookies:[{cookie_key:"amg_user_partner",sparrow_key:"cnid"},{cookie_key:"aam_uuid",sparrow_key:"aam_uuid"}],infinityID:!0,preinit:["infinityid"],autotrack:!1,grid:{granularity:100},scroll:{granularity:400},queue:{sendThreshold:0},heartbeat:{interval:5500},events:[{selector:"window",type:["pageview","timespent","scroll"]},{selector:".mvt-variant",type:["inViewExists"],dataAttrMapper:{appID:"data-cn-application",expID:"data-cn-test",varID:"data-cn-variation"},customMapper:{_c:"variations"}},{parent:".mvt-variant",selector:".mvt-item-link",type:["inViewExists"],dataAttrMapper:{dim1:"href",appID:"data-cn-application",expID:"data-cn-test",varID:"data-cn-variation"},customMapper:{_c:"variations",_t:"linksIn-view"}},{parent:"body",selector:".mvt-item-link",type:["click"],dataAttrMapper:{dim1:"href",appID:"data-cn-application",expID:"data-cn-test",varID:"data-cn-variation"},customMapper:{_c:"variations"}}],url:"//capture.condenastdigital.com/track"}},{}],6:[function(require,module,exports){(function(global){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Promise=require("es6-promise").Promise,Cookie=require("js-cookie");function _stringFunctionHelper(str){var inner="("+str+")",internal;try{internal=eval(inner)}catch(e){}return internal}function _urlHelper(){return window.location.origin+window.location.pathname}function _extendHelper(){var e=arguments,t={};if(e&&e[0])for(var n in e)for(var r in e[n])t[r]=e[n][r];return t}function _TrenderHelper(t){var n=this,e=arguments,r={},o=[],i=[];if(e&&e[1])for(var a in delete e[0],e)for(var c in e[a])if("function"==typeof e[a][c])i.push(c),o.push(e[a][c]);else if(e[a][c]&&e[a][c].indexOf&&0===e[a][c].indexOf("function")){var s=_stringFunctionHelper(e[a][c]);if("function"==typeof s)try{i.push(c),o.push(s)}catch(e){}}else r[c]=e[a][c];var u=o.map(function(e){return e.call(n,t,r)});return Promise.all(u).then(function(e){for(var t=0;t<e.length;t++)r[i[t]]=e[t];return r}).catch(function(){return r})}function _isFunctionHelper(e){return e&&"[object Function]"==={}.toString.call(e)}function _uuidHelper(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}function _flattenObjectHelper(e,t,n){var r=t||{},o=Object(e);for(var i in o){var a=n?[n,i].join(":"):i;"object"===_typeof(e[i])?_flattenObjectHelper(e[i],r,a):e[i]&&(r[a]=e[i])}return r}function _spatialGridHelper(e,t){return Math.round(e/t)*t}function _paramsHelper(e){var t=[];for(var n in e)e[n]&&t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")}function _ajaxHelper(e){var t=new XMLHttpRequest,n=_extendHelper({withCredentials:!1,method:"GET"},e);return t.open(n.method,n.url),t.withCredentials=n.withCredentials,t.setRequestHeader("Accept","text/plain"),t.send(null),{done:function(e){t.onreadystatechange=function(){4===this.readyState&&(200<=this.status&&this.status<300?e(this.responseText):e(!1))},t.ontimeout=function(){e(!1)},t.onerror=function(){e(!1)}}}}function deviceType(e){if(!e)return{type:"desktop",model:""};var t=e.toLowerCase();function n(e){return e.test(t)}function r(e){return e.exec(t)}var o=["tv","tablet","mobile","desktop"],i={};return n(/googletv|smarttv|smart-tv|internet.tv|netcast|nettv|appletv|boxee|kylo|roku|dlnadoc|roku|pov_tv|hbbtv|ce\-html/)?(i.type=o[0],i.model="smartTv"):n(/xbox|playstation.3|wii/)?(i.type=o[0],i.model="gameConsole"):n(/ip(a|ro)d/)?(i.type=o[1],i.model="ipad"):n(/tablet/)&&!n(/rx-34/)&&!n(/shield/)||n(/folio/)?(i.type=o[1],i.model=String(r(/playbook/)||"")):n(/linux/)&&n(/android/)&&!n(/fennec|mobi|htc.magic|htcX06ht|nexus.one|sc-02b|fone.945/)?(i.type=o[1],i.model="android"):n(/kindle/)||n(/mac.os/)&&n(/silk/)?(i.type=o[1],i.model="kindle"):n(/gt-p10|sc-01c|shw-m180s|sgh-t849|sch-i800|shw-m180l|sph-p100|sgh-i987|zt180|htc(.flyer|\_flyer)|sprint.atp51|viewpad7|pandigital(sprnova|nova)|ideos.s7|dell.streak.7|advent.vega|a101it|a70bht|mid7015|next2|nook/)||n(/mb511/)&&n(/rutem/)?(i.type=o[1],i.model="android"):n(/bb10/)?(i.type=o[2],i.model="blackberry"):(i.model=r(/iphone|ipod|android|blackberry|opera mini|opera mobi|skyfire|maemo|windows phone|palm|iemobile|symbian|symbianos|fennec|j2me/),null!==i.model?(i.type=o[2],i.model=String(i.model)):(i.model="",n(/bolt|fennec|iris|maemo|minimo|mobi|mowser|netfront|novarra|prism|rx-34|skyfire|tear|xv6875|xv6975|google.wireless.transcoder/)?i.type=o[2]:n(/opera/)&&n(/windows.nt.5/)&&n(/htc|xda|mini|vario|samsung\-gt\-i8000|samsung\-sgh\-i9/)?i.type=o[2]:n(/windows.(nt|xp|me|9)/)&&!n(/phone/)||n(/win(9|.9|nt)/)||n(/\(windows 8\)/)?i.type=o[3]:n(/macintosh|powerpc/)&&!n(/silk/)?(i.type=o[3],i.model="mac"):n(/linux/)&&n(/x11/)?i.type=o[3]:n(/solaris|sunos|bsd/)?i.type=o[3]:n(/cros/)?i.type=o[3]:n(/bot|crawler|spider|yahoo|ia_archiver|covario-ids|findlinks|dataparksearch|larbin|mediapartners-google|ng-search|snappy|teoma|jeeves|tineye/)&&!n(/mobile/)?(i.type=o[3],i.model="crawler"):i.type=o[3])),i}function _lowerAllKeys(e){for(var t,n=Object.keys(e),r=n.length,o={};r--;)o[(t=n[r]).toLowerCase()]=e[t];return o}function pluck(e,t){var n={},r=_lowerAllKeys(e);return t&&Array.isArray(t)&&t.forEach(function(e){var t=e.toLowerCase();Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}),n}function rand(){return Date.now()}function root(){return"object"===("undefined"==typeof self?"undefined":_typeof(self))&&self.self===self&&self||"object"===(void 0===global?"undefined":_typeof(global))&&global.global===global&&global||this}function _dataAttrMapper(r,o){var i={};return o&&r&&r.getAttribute&&Object.keys(o).forEach(function(e){var t=o[e],n=r.getAttribute(t);n&&(i[e]=n)}),i}function _uniqueId(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t}function _setSid(){try{var e=Cookie.get("sID")||_uuidHelper(),t={expires:.02},n=window.location.host.split(".").reverse();n&&1<n.length&&n[1]&&n[0]&&(t.domain=n[1]+"."+n[0]),Cookie.set("sID",e,t)}catch(e){}}function _selectorMatches(e,t){var n=Element.prototype;return(n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||function(e){return-1!==[].indexOf.call(document.querySelectorAll(e),this)}).call(e,t)}function _mark(e){performance&&performance.mark&&performance.mark(e)}function _measure(e,t,n){performance&&performance.measure&&performance.measure(e,t,n)}module.exports={extend:_extendHelper,exrend:_TrenderHelper,isFunction:_isFunctionHelper,flatten:_flattenObjectHelper,ajax:_ajaxHelper,params:_paramsHelper,gridReduce:_spatialGridHelper,uuid:_uuidHelper,url:_urlHelper,deviceType:deviceType,pluck:pluck,rand:rand,root:root(),dataAttrMapper:_dataAttrMapper,uniqueId:_uniqueId,setSid:_setSid,selectorMatches:_selectorMatches,mark:_mark,measure:_measure}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"es6-promise":1,"js-cookie":3}],7:[function(e,t,n){"use strict";var a=e("../helpers");t.exports=function(e){var t=e.selector||"",n=e.dataAttrMapper||{},r=[].slice.call(document.querySelectorAll(t));if(1<=r.length){var o=r[0],i=a.dataAttrMapper(o,n);if(i)return{count:r.length,category:i._c}}return{count:r.length,category:""}}},{"../helpers":6}],8:[function(e,t,n){"use strict";var r=e("in-view"),o=function(e,t,n){if(window.IntersectionObserver&&t){new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&n(e.target)})},{root:null}).observe(t)}else r(e).on("enter",function(e){return n(e)})},a=function(e,t,n){if(window.IntersectionObserver&&t)for(var r=0;r<t.length;r++)o(e,t[r],n);else o(e,null,n)};t.exports=function(e){var t=e.selector||"",n=document.querySelector(e.parent)||document.body,r=e.onEnter||function(){},o=document.querySelectorAll(t);if(!window.MutationObserver||o&&o.length)a(t,o,r);else{var i=new MutationObserver(function(e){return function(e,t,n,r){if(!(e.reduce(function(e,t){return t.addedNodes&&t.addedNodes.length&&(e+=t.addedNodes.length),e},0)<1)){var o=document.querySelectorAll(n);o&&(a(n,o,t),r.disconnect())}}(e,r,t,i)});i.observe(n,{childList:!0,subtree:!0,attributes:!1,characterData:!1})}}},{"in-view":2}],9:[function(c,e,t){"use strict";c("js-cookie");var s=c("../helpers"),n=[];function r(e,t){return function(e,t){if(!e)return!1;var n={_ts:(new Date).toISOString(),_t:e.type},r=c("../pipeline");for(var o in r)if(Object.prototype.hasOwnProperty.call(r,o)){var i=r[o],a={};s.isFunction(i)&&(a=i(e,t)),n=s.extend(n,a)}return s.exrend(e,n,t.meta,e.meta||e.options||{}).then(function(e){return s.root.SparrowCache.event=n,e})}(e,t).then(function(e){e._c&&e._t&&(n.push(e),n.length>t.queue.sendThreshold&&o(t))})}function o(a){n.forEach(function(e){var t,n,r,o,i;t=e,n=a,r=new Image,o=s.flatten(t),i=s.params(o),r.src=n.url+"?"+i,setTimeout(function(){r=null},1e3),s.setSid()}),n=[]}e.exports={send:function(e,t){return r(e,t).then(function(){o(t)})}}},{"../helpers":6,"../pipeline":13,"js-cookie":3}],10:[function(e,t,n){"use strict";t.exports=function(e){var n=((e||{}).scroll||{}).granularity||100,r={x:0,y:0};return{depth:function(e){var t={x:e.scrollX||e.scrollLeft||0,y:e.scrollY||e.scrollTop||0};return Math.abs(r.x-t.x)>n||Math.abs(r.y-t.y)>n?(r=t,Math.round(t.y/n)*n):0}}}},{}],11:[function(e,t,n){"use strict";t.exports=function(e){var t=e||{},n=t.activeTimeout||5,r=t.heartbeat||5.5,o=(new Date).getTime(),i=o,a=o,c=0;function s(){i=(new Date).getTime()}return["focus","mousedown","mouseup","mousemove","scroll","touchstart","touchenter","keyup","keydown"].forEach(function(e){window.addEventListener(e,s,!1)}),setInterval(function(){var e=(new Date).getTime();c+=e-i<1e3*n?e-a:0,a=e},100),{sendHeartbeat:function(){var e=c/1e3,t=Math.round(e);return(c=0)<t&&0<e&&e<=r+.25?1e3*t:0}}}},{}],12:[function(e,t,n){"use strict";var W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.exports=function(){var e={};try{var t=document.getElementsByTagName("meta"),n={};for(var r in t)try{var o=t[r].getAttribute("property")||t[r].getAttribute("name"),i=t[r].getAttribute("content");n[o]=i}catch(e){}n&&(e.cBr=n["og:site_name"]||"",e.cKe=n.keywords?n.keywords.toLowerCase():"",e.cCh=n.channel||n.Channel||"",e.cSch=n.subchannel||n.Subchannel||"",e.cTi=n["og:title"]||document.title||"",e.cTy=n["og:type"]||"")}catch(e){}if(window&&window._4d&&window._4d.context&&window._4d.context.topics){var a=window._4d.context.topics,c=a.map(function(e){return e.name}),s=a.map(function(e){return e.score});e.cTp=c.join(", "),e.cTpw=s.join(", ")}if(window&&window._4d&&window._4d.context&&window._4d.context.entities){var u=window._4d.context.entities,l=u.map(function(e){return e.name}),d=u.map(function(e){return e.score});e.cEnt=l.join(", "),e.cEnw=d.join(", ")}try{var f=f||window.digitalData||{};0<Object.keys(f).length&&(e.cCu=f.canonical,e.cCl=f.contentLength,e.cTy=f.pageType,e.cEn=f.environment,e.cId=f.contentID,e.cCh=f.section,e.cSch=f.subsection,e.cPd=f.publishDate||"",e.ccS=f.contentSource,e.cPv=f.pageValue,e.cSt=f.searchKeywords,e.cSr=f.numOfSearchResults,e.vTn=f.test,e.vTt=f.variation)}catch(e){}try{var p=p||window.dataLayer;if(0<p.length){var h=p[0],v=h.content,m=h.experiments,y=h.page,w=h.search,g=h.site;if(y){var b=y.canonical;e.cCu=b}if(w){var x=w.searchTerms;e.cSt=x||""}if(g){var _=g.orgId,k=g.orgAppId;e.org_id=_,e.org_app_id=k}if(v){var S=v.contentLength,j=v.pageType,E=v.contentID,C=v.section,T=v.subsection,A=v.publishDate,O=v.contentSource,I=v.pageValue,M=v.display,D=v.keywords;try{e.cCl=S?parseInt(S,10):void 0}catch(e){}e.cTy=j,e.cId=E,e.cCh=C,e.cSch=T,e.cPd=A||"",e.ccS=O,e.cPv=I||"all",e.cTi=M,e.cKe=D}if(m){var H=m.appID,P=m.expID,L=m.varID;e.appID=H?H.join(","):void 0,e.expID=P?P.join(","):void 0,e.varID=L?L.join(","):void 0}}}catch(e){}try{var q=document.querySelector('[type="application/ld+json"]');if(q){var R=JSON.parse(q.innerHTML),N=R;Array.isArray(R)&&(N=R.filter(function(e){return"NewsArticle"===e["@type"]})[0]||{});var U=N.author;switch(void 0===U?"undefined":W(U)){case"object":U=Array.isArray(U)?U.map(function(e){return"object"===(void 0===e?"undefined":W(e))&&e.name?e.name:e}):[U.name];break;case"string":U=U.split(",");break;case"undefined":U=[];break;default:U=[]}e.cTi=N.headline||"",e.cPd=N.datePublished||"",e.cAu=U.join(",")}}catch(e){}return e}},{}],13:[function(e,t,n){"use strict";var r=e("./content"),o=e("./page"),i=e("./user");t.exports={content:r,page:o,user:i}},{"./content":12,"./page":14,"./user":15}],14:[function(e,t,n){"use strict";var d=e("../helpers");function f(e,t){var n=e.split("&").reduce(function(e,t){var n=t.split("=");return e[n[0]]=n[1],e},{});return d.pluck(n,t)}function p(){var e=void 0!==window.pageXOffset,t="CSS1Compat"===(document.compatMode||"")?"documentElement":"body";return{x:e?window.pageXOffset:document[t].scrollLeft,y:e?window.pageYOffset:document[t].scrollTop}}t.exports=function(e,t){try{var n=document.createElement("a");n.href=document.referrer;var r=[window.location.protocol,"//",window.location.host,window.location.pathname].join(""),o=[n.protocol,"//",n.host,n.pathname].join(""),i="direct"===(o=r!==o?o:"direct")?"direct":"referral";location.host===n.host&&window.location.pathname!==n.pathname&&(i="internal");var a={};if(window.location.search)a=f(0===window.location.search.indexOf("?")?window.location.search.substr(1):window.location.search,t.capturedQueryParams);var c={};if(window.location.hash)c=f(window.location.hash.substr(1),t.capturedHashParams);var s=null;return[{key:"facebook",label:"facebook"},{key:"twitter",label:"twitter"},{key:"t.co/",label:"twitter"},{key:"plus.google",label:"google plus"},{key:"instagram",label:"instagram"},{key:"pinterest",label:"pinterest"},{key:"reddit",label:"reddit"},{key:"tumblr",label:"tumblr"},{key:"linkedin",label:"linkedin"}].forEach(function(e){-1<o.indexOf(e.key)&&(i="social",s=e.label)}),[{key:"www.google",label:"google"},{key:"yahoo.",label:"yahoo"},{key:"bing.",label:"bing"}].forEach(function(e){-1<o.indexOf(e.key)&&(i="search",s=e.label)}),d.extend({pHr:r,pRt:i,pRs:s,pHp:location.pathname,pRr:o,pSx:d.gridReduce(p().x,t.grid.granularity),pSy:d.gridReduce(p().y,t.grid.granularity),pWw:d.gridReduce(window.innerWidth,t.grid.granularity),pWh:d.gridReduce(window.innerHeight,t.grid.granularity),pPw:d.gridReduce((l=document,Math.max(l.body.scrollWidth,l.documentElement.scrollWidth,l.body.offsetWidth,l.documentElement.offsetWidth,l.body.clientWidth,l.documentElement.clientWidth)),t.grid.granularity),pPh:d.gridReduce((u=document,Math.max(u.body.scrollHeight,u.documentElement.scrollHeight,u.body.offsetHeight,u.documentElement.offsetHeight,u.body.clientHeight,u.documentElement.clientHeight)),t.grid.granularity),pSw:window.screen.width||0,pSh:window.screen.height||0,pAd:document.getElementsByClassName("displayAd").length},a,c)}catch(e){return{}}var u,l}},{"../helpers":6}],15:[function(e,t,n){"use strict";var d=e("js-cookie"),f=e("../helpers");t.exports=function(e,t){var n="CN_sp",r="CN_su";try{var o=e||{},i=d.get(n)||f.uuid(),a=d.get(n)?0:1,c=d.get("pID")||f.uuid(),s=d.get(r)||f.uuid(),u=d.get(r)?0:1;d.set(n,i),d.set(r,s,{expires:30}),d.set("pID",c);var l={};return(t.capturedCookies||Array.isArray(t.capturedCookies))&&t.capturedCookies.map(function(e){if(e.cookie_key&&e.sparrow_key){var t=Object.create({});return t[e.sparrow_key]=d.get(e.cookie_key),t}return{}}).forEach(function(e){l=f.extend(l,e)}),f.extend({uID:i,uNw:a,uUq:u,sID:d.get("sID"),pID:c,uMx:f.gridReduce(o.x||o.pageX||o.screenX||0,t.grid.granularity),uMy:f.gridReduce(o.y||o.pageY||o.screenX||0,t.grid.granularity),uDt:f.deviceType(window.navigator.userAgent||window.navigator.vendor||window.opera||"").type},l)}catch(o){return{}}}},{"../helpers":6,"js-cookie":3}],16:[function(e,t,n){"use strict";var i=e("../helpers");t.exports=function(r){var t=this,o=2;function n(e,t){--o;var n=JSON.parse(t);window._4d[e]=n,i.mark("4d-load-"+e+"-end"),i.measure("4d-load-"+e,"4d-load-"+e+"-start","4d-load-"+e+"-end"),0===o&&r({})}window._4d=window._4d||{},i.mark("4d-load-context-start"),i.ajax({url:"//4d.condenastdigital.com/content?url="+i.url()}).done(n.bind(this,"context")),i.mark("4d-load-user-start"),i.ajax({url:"//infinityid.condenastdigital.com/?rand="+i.rand(),withCredentials:!0}).done(function(e){i.ajax({url:"//4d.condenastdigital.com/user?xid="+e}).done(n.bind(t,"user"))})}},{"../helpers":6}],17:[function(e,t,n){"use strict";var r=e("./4d"),o=e("./infinityid"),i=e("./infinityid-nocache"),a=e("./user-context");t.exports={"4d":r,infinityid:o,"infinityid-nocache":i,"user-context":a}},{"./4d":16,"./infinityid":19,"./infinityid-nocache":18,"./user-context":20}],18:[function(e,t,n){"use strict";var r=e("../helpers");t.exports=function(t){r.ajax({url:"//infinityid.condenastdigital.com/?rand="+r.rand(),withCredentials:!0}).done(function(e){window.SparrowCache=window.SparrowCache||{},window.SparrowCache.xid=e,t({xID:e})})}},{"../helpers":6}],19:[function(e,t,n){"use strict";var r=e("js-cookie"),o=e("../helpers");t.exports=function(t){window.SparrowCache=window.SparrowCache||{};var e=null;try{e=r.get("CN_xid")}catch(e){}e&&"false"!==e&&!1!==e?(window.SparrowCache.xid=e,t({xID:e})):o.ajax({url:"//infinityid.condenastdigital.com/?rand="+o.rand(),withCredentials:!0}).done(function(e){window.SparrowCache.xid=e;try{r.set("CN_xid",e,{expires:18})}catch(e){}t({xID:e})})}},{"../helpers":6,"js-cookie":3}],20:[function(e,t,n){"use strict";var r=e("../helpers"),o=e("./infinityid"),i=e("es6-promise").Promise,a="4d-load-start",c="4d-load-end",s="4d-load-user-start",u="4d-load-user-end",l="4d-load-context-start",d="4d-load-context-end";t.exports=function(t){window._4d=window._4d||{};var e=new i(function(n){o(function(e){var t=e.xID;window._4d.user&&Object.keys(window._4d.user).length?t?n({xID:t}):n():t?(r.mark(s),r.ajax({url:"https://4d.condenastdigital.com/user?xid="+encodeURIComponent(t)}).done(function(e){try{window._4d.user=JSON.parse(e),r.mark(u),r.measure("4d-load-user",s,u)}catch(e){}n({xID:t})})):(window._4d.user=window._4d.user||{},n())})}),n=new i(function(t){window._4d.context&&Object.keys(window._4d.context).length?t():(r.mark(l),r.ajax({url:"https://4d.condenastdigital.com/content?url="+encodeURIComponent(r.url())}).done(function(e){try{window._4d.context=JSON.parse(e),r.mark(d),r.measure("4d-load-context",l,d)}catch(e){}t()}))});r.mark(a),i.all([e,n]).then(function(e){r.mark(c),r.measure("4d-load",a,c),t(e[0])}).catch(function(e){console.warn("user context preinit error",e),t({})})}},{"../helpers":6,"./infinityid":19,"es6-promise":1}],21:[function(p,e,t){"use strict";var n,r,h=p("js-cookie"),v=p("./lib/timespent"),m=p("./lib/elementExists"),y=p("./lib/inViewExists"),w=p("./lib/scroll"),g=p("./lib/messenger"),b=p("./helpers"),x=p("./config");function o(e){var t,n,r,o,i,a,c=void 0,s=void 0,u={},l={scroll:function(o){var i=u.events.filter(function(e){return 0<=e.type.indexOf(o.type)&&e.selector===o.selector});0<i.length&&window.addEventListener("scroll",function(e){var t=e.target instanceof HTMLDocument?window:e.target;if(n=t,i.some(function(e){return n===window&&"window"===e.selector||n!==window&&b.selectorMatches(n,e.selector)})){var n,r=s.depth(t);0<r&&(o.meta=b.extend(o.meta||{},{_v:r}),g.send(o,u))}},!0)},pageview:function(t){u.events.filter(function(e){return 0<=e.type.indexOf(t.type)}).forEach(function(e){t.meta=b.extend(t.meta||{},e.meta||{}),g.send(t,u)})},inViewExists:function(r){u.events.filter(function(e){return 0<=e.type.indexOf(r.type)&&e.selector===r.selector}).forEach(function(n){var e={selector:n.selector,parent:n.parent,onEnter:function(e){var t={};n.dataAttrMapper&&(t=b.dataAttrMapper(e,n.dataAttrMapper)),n.customMapper&&(t=b.extend(t,n.customMapper)),r.meta=b.extend(r.meta||{},{_v:1,_t:"in-view"},t,n.meta),g.send(r,u)}};y(e)})},elementExists:function(n){u.events.filter(function(e){return 0<=e.type.indexOf(n.type)&&e.selector===n.selector}).forEach(function(e){var t=m(e);n.meta=b.extend(n.meta||{},{_v:t.count,_t:"exists",_c:t.category},e.meta),g.send(n,u)})},timespent:function(t){setInterval(function(){var e=c.sendHeartbeat();0<e&&(t.meta=b.extend(t.meta||{},{_v:e}),g.send(t,u))},u.heartbeat.interval)}};function d(i){function r(e,t){var n=i.dataAttrMapper||{},r=i.customMapper||{},o=b.dataAttrMapper(e,n);o&&(t.meta=o),r&&(t.meta=b.extend(t.meta,r,i.meta)),g.send(t,u)}i.type=i.type[0]?i.type:[i.type];var e=void 0;e=i.parent?[document.querySelector(i.parent)]:Array.prototype.slice.call(document.querySelectorAll(i.selector)),i.type.forEach(function(t){var n={selector:i.selector,type:t};f(u,n)||(Object.prototype.hasOwnProperty.call(l,t)?l[t](n):e.forEach(function(e){f(u,n,e)||e.addEventListener(t,function(e){if(i.parent){for(var t=e.target;t&&t!==this;t=t.parentNode)if(b.selectorMatches(t,i.selector)){r(t,n);break}}else r(e.currentTarget,n)},!1)}))})}function f(e,t,n){var r=e.origin+"/"+t.selector+"/"+t.type;return n&&(r+="/"+b.uniqueId(n.className+n.id+n.localName+n.innerHTML)),-1<b.root.SparrowCache.events.indexOf(r)||(b.root.SparrowCache.events.push(r),!1)}return t=e,"undefined"!=typeof window&&((a=(i=t)||{}).meta=i.meta||{},a.autotrack=i.autotrack||!1,a.meta._o=a.meta._o||a.origin||x.origin,a.meta._c=a.meta._c||a.campaign||x.campaign||"general",u=b.extend(x,a),x.capturedCookies&&Array.isArray(x.capturedCookies)&&(u.capturedCookies=x.capturedCookies.concat(a.capturedCookies||[])),function(){try{b.setSid(),b.root.sparrowInitialize||(b.root.sparrowInitialize=!0,h.set("pID",b.uuid()))}catch(e){}}(),c=v(),s=w(u),function(){if(Array.isArray(u.preinit)&&0<u.preinit.length){var t=u.preinit.length;u.preinit.forEach(function(e){p("./preinit")[e](function(e){t--,u.meta=b.extend(u.meta,e),0===t&&u&&u.events&&u.events.forEach(function(e){d(e)})})})}else u&&u.events&&u.events.forEach(function(e){d(e)})}(),u.autotrack&&(n=window.history,o=n.pushState,window.popstateEventProxy||(r=function(){setTimeout(function(){g.send({type:"pageview"},u)},10)},n.pushState=function(e){return"function"==typeof n.onpushstate&&n.onpushstate({state:e}),o.apply(n,arguments)},window.popstateEventProxy=new function(e){this.event=e,this.isBound=!1,this.bindPopstateEvent=function(){window.addEventListener("popstate",this.event),window.addEventListener("onhashchange",this.event),n.onpushstate=this.event,this.isBound=!0},this.removePopstateEvent=function(){window.removeEventListener("popstate",this.event),n.onpushstate={}}}(r),window.popstateEventProxy.bindPopstateEvent()))),{track:function(e,t,n){var r={type:t,meta:b.extend({_c:e},n)};g.send(r,u)},options:function(){return u},bind:d,trackPageView:function(){g.send({type:"pageview"},u)}}}b.root.SparrowCache=b.root.SparrowCache||{events:[],pixels:[]},n=0,r=setInterval(function(){if(b.root.SparrowConfig){var e=b.root.SparrowConfig;return b.root.SparrowCache.pixels.push(new o(e)),void clearInterval(r)}n>x.reloadDelay?clearInterval(r):n+=200},200),e.exports=o},{"./config":5,"./helpers":6,"./lib/elementExists":7,"./lib/inViewExists":8,"./lib/messenger":9,"./lib/scroll":10,"./lib/timespent":11,"./preinit":17,"js-cookie":3}]},{},[21])(21)});
